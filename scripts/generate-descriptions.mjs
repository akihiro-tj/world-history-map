import fs from 'node:fs';
import path from 'node:path';

// Historical data for major nations (Japanese names, basic facts, and key events)
const nationData = {
  // Roman/Byzantine
  'Roman Empire': {
    name: 'ローマ帝国',
    facts: (year) => {
      if (year >= -27 && year <= 14) {
        return [
          '首都: ローマ',
          '皇帝: アウグストゥス（初代皇帝）',
          '政体: 元首政',
          '時代: パクス・ロマーナの始まり',
          '人口: 約5000万人',
        ];
      }
      if (year >= 98 && year <= 180) {
        return [
          '首都: ローマ',
          '時代: 五賢帝時代',
          '政体: 帝政',
          '特徴: ローマ帝国最盛期',
          '領土: ブリタニアからメソポタミアまで',
        ];
      }
      if (year >= 284 && year <= 395) {
        return [
          '首都: ローマ/コンスタンティノープル',
          '時代: 専制君主政',
          '政体: 帝政（四帝分治制→統一）',
          '宗教: キリスト教公認（313年）',
        ];
      }
      return ['首都: ローマ', '政体: 帝政', '特徴: 地中海世界の統一'];
    },
    events: [
      { year: -27, event: 'アウグストゥスが初代皇帝に即位' },
      { year: 117, event: 'トラヤヌス帝治下で最大版図に達する' },
      { year: 395, event: '東西に分裂' },
    ],
  },
  'Eastern Roman Empire': {
    name: '東ローマ帝国（ビザンツ帝国）',
    facts: (year) => {
      if (year >= 527 && year <= 565) {
        return [
          '首都: コンスタンティノープル',
          '皇帝: ユスティニアヌス1世',
          '政体: 帝政',
          '法典: ローマ法大全編纂',
          '建築: ハギア・ソフィア大聖堂',
        ];
      }
      return ['首都: コンスタンティノープル', '政体: 帝政', '宗教: 東方正教会'];
    },
    events: [
      { year: 395, event: 'ローマ帝国の東西分裂により成立' },
      { year: 527, event: 'ユスティニアヌス1世が即位' },
      { year: 1453, event: 'コンスタンティノープル陥落、滅亡' },
    ],
  },
  'Western Roman Empire': {
    name: '西ローマ帝国',
    facts: [
      '首都: ラヴェンナ/ミラノ',
      '政体: 帝政',
      '状況: ゲルマン民族の侵入',
      '特徴: 衰退期のローマ帝国',
    ],
    events: [
      { year: 395, event: 'ローマ帝国の東西分裂により成立' },
      { year: 410, event: '西ゴート族によるローマ略奪' },
      { year: 476, event: 'オドアケルにより滅亡' },
    ],
  },
  'Byzantine Empire': {
    name: 'ビザンツ帝国',
    facts: (year) => {
      if (year >= 867 && year <= 1025) {
        return [
          '首都: コンスタンティノープル',
          '時代: マケドニア朝',
          '政体: 帝政',
          '特徴: ビザンツ黄金期、バルカン支配',
        ];
      }
      if (year >= 1261 && year <= 1453) {
        return [
          '首都: コンスタンティノープル',
          '時代: パレオロゴス朝',
          '政体: 帝政',
          '状況: オスマン帝国の圧迫、衰退期',
        ];
      }
      return ['首都: コンスタンティノープル', '政体: 帝政', '宗教: 東方正教会'];
    },
    events: [
      { year: 527, event: 'ユスティニアヌス1世が即位' },
      { year: 1054, event: '東西教会分裂' },
      { year: 1453, event: 'コンスタンティノープル陥落' },
    ],
  },
  'Roman Republic': {
    name: 'ローマ共和国',
    capital: 'ローマ',
    type: '共和制',
    events: [
      { year: -509, event: '王政廃止、共和制開始' },
      { year: -264, event: '第一次ポエニ戦争開始' },
      { year: -27, event: '帝政へ移行' },
    ],
  },
  Rome: {
    name: 'ローマ',
    capital: 'ローマ',
    type: '王政/共和制',
    events: [{ year: -753, event: '伝承上のローマ建国' }],
  },

  // Chinese dynasties
  Han: {
    name: '漢',
    facts: (year) => {
      if (year >= -202 && year <= 8) {
        return [
          '首都: 長安',
          '時代: 前漢（西漢）',
          '政体: 帝政',
          '特徴: シルクロード開通、儒教国教化',
        ];
      }
      if (year >= 25 && year <= 220) {
        return ['首都: 洛陽', '時代: 後漢（東漢）', '政体: 帝政', '特徴: 紙の発明、仏教伝来'];
      }
      return ['首都: 長安/洛陽', '政体: 帝政'];
    },
    events: [
      { year: -202, event: '劉邦が漢を建国' },
      { year: 8, event: '王莽による簒奪（新の建国）' },
      { year: 220, event: '後漢滅亡' },
    ],
  },
  'Han Empire': {
    name: '漢',
    facts: (year) => {
      if (year >= -141 && year <= -87) {
        return [
          '首都: 長安',
          '皇帝: 武帝（在位前141-87年）',
          '政体: 帝政',
          '領土: 朝鮮、西域まで拡大',
          '特徴: 漢の最盛期、シルクロード開通',
        ];
      }
      if (year >= -202 && year <= 8) {
        return ['首都: 長安', '時代: 前漢', '政体: 帝政', '人口: 約6000万人'];
      }
      return ['首都: 長安/洛陽', '政体: 帝政'];
    },
    events: [
      { year: -202, event: '劉邦が漢を建国' },
      { year: -141, event: '武帝即位、最盛期へ' },
      { year: 220, event: '後漢滅亡' },
    ],
  },
  'Han Zhao': {
    name: '漢趙',
    capital: '平陽',
    type: '帝政',
    events: [{ year: 304, event: '劉淵が建国' }],
  },
  'Jin Empire': {
    name: '晋',
    capital: '洛陽',
    type: '帝政',
    events: [
      { year: 265, event: '司馬炎が建国' },
      { year: 280, event: '三国統一' },
    ],
  },
  'Sui Empire': {
    name: '隋',
    capital: '大興城',
    type: '帝政',
    events: [
      { year: 581, event: '楊堅が建国' },
      { year: 589, event: '南北統一' },
      { year: 618, event: '滅亡、唐に禅譲' },
    ],
  },
  Tang: {
    name: '唐',
    facts: (year) => {
      if (year >= 618 && year <= 626) {
        return [
          '首都: 長安',
          '皇帝: 李淵（高祖、在位618-626年）',
          '政体: 帝政',
          '特徴: 唐朝建国期',
        ];
      }
      if (year >= 626 && year <= 649) {
        return [
          '首都: 長安',
          '皇帝: 李世民（太宗、在位626-649年）',
          '政体: 帝政',
          '特徴: 貞観の治、唐の全盛期の基礎',
          '政策: 律令制完成、三省六部',
        ];
      }
      if (year >= 690 && year <= 705) {
        return [
          '首都: 洛陽',
          '皇帝: 武則天（則天武后）',
          '政体: 帝政（周朝と称す）',
          '特徴: 中国史上唯一の女帝',
        ];
      }
      if (year >= 712 && year <= 756) {
        return [
          '首都: 長安',
          '皇帝: 玄宗（在位712-756年）',
          '政体: 帝政',
          '特徴: 開元の治→安史の乱',
          '文化: 李白、杜甫の時代',
        ];
      }
      return ['首都: 長安', '政体: 帝政', '特徴: 中国黄金時代'];
    },
    events: [
      { year: 618, event: '李淵が建国' },
      { year: 755, event: '安史の乱' },
      { year: 907, event: '滅亡' },
    ],
  },
  'Tang Empire': {
    name: '唐',
    facts: (year) => {
      if (year >= 626 && year <= 649) {
        return [
          '首都: 長安',
          '皇帝: 太宗（李世民）',
          '政体: 帝政',
          '特徴: 「貞観の治」、名君の時代',
          '領土: 中央アジアまで拡大',
        ];
      }
      if (year >= 712 && year <= 756) {
        return [
          '首都: 長安',
          '皇帝: 玄宗（在位712-756年）',
          '政体: 帝政',
          '文化: 李白・杜甫・王維の詩、楊貴妃',
          '危機: 安史の乱（755年）',
        ];
      }
      return ['首都: 長安', '政体: 帝政', '人口: 約5000万人'];
    },
    events: [
      { year: 618, event: '李淵が建国' },
      { year: 690, event: '則天武后が即位' },
      { year: 755, event: '安史の乱' },
    ],
  },
  Song: {
    name: '宋',
    facts: (year) => {
      if (year >= 960 && year <= 1127) {
        return [
          '首都: 開封（汴京）',
          '時代: 北宋',
          '政体: 帝政',
          '特徴: 文治主義、科挙制度の発展',
          '経済: 商業・都市文化の発展',
        ];
      }
      if (year >= 1127 && year <= 1279) {
        return [
          '首都: 臨安（杭州）',
          '時代: 南宋',
          '政体: 帝政',
          '状況: 金と対峙、江南に偏安',
          '文化: 朱子学の大成',
        ];
      }
      return ['首都: 開封/臨安', '政体: 帝政'];
    },
    events: [
      { year: 960, event: '趙匡胤が建国' },
      { year: 1127, event: '靖康の変、南宋へ移行' },
      { year: 1279, event: '滅亡' },
    ],
  },
  'Song Empire': {
    name: '宋',
    facts: (year) => {
      if (year >= 960 && year <= 1127) {
        return [
          '首都: 開封',
          '時代: 北宋',
          '政体: 帝政（文治主義）',
          '発明: 火薬・印刷術・羅針盤',
          '人口: 約1億人',
        ];
      }
      return ['首都: 開封', '政体: 帝政', '特徴: 科学技術の黄金期'];
    },
    events: [
      { year: 960, event: '趙匡胤が建国' },
      { year: 1127, event: '靖康の変' },
    ],
  },
  Yuan: {
    name: '元',
    facts: (year) => {
      if (year >= 1271 && year <= 1294) {
        return [
          '首都: 大都（北京）',
          '皇帝: フビライ・ハーン（世祖）',
          '政体: 帝政（モンゴル系）',
          '特徴: 中国初の異民族統一王朝',
          '政策: 日本遠征（元寇）、大運河整備',
        ];
      }
      if (year >= 1294 && year <= 1368) {
        return [
          '首都: 大都（北京）',
          '政体: 帝政（モンゴル系）',
          '状況: 政治混乱、紅巾の乱',
          '人口: 約8000万人',
        ];
      }
      return ['首都: 大都', '政体: 帝政', '民族: モンゴル族支配'];
    },
    events: [
      { year: 1271, event: 'フビライが元を建国' },
      { year: 1279, event: '南宋を滅ぼし中国統一' },
      { year: 1368, event: '滅亡' },
    ],
  },
  Ming: {
    name: '明',
    facts: (year) => {
      if (year >= 1368 && year <= 1398) {
        return [
          '首都: 南京',
          '皇帝: 洪武帝（朱元璋）',
          '政体: 帝政',
          '特徴: 漢民族王朝の復興',
          '政策: 里甲制、海禁政策',
        ];
      }
      if (year >= 1402 && year <= 1424) {
        return [
          '首都: 北京（1421年〜）',
          '皇帝: 永楽帝',
          '政体: 帝政',
          '事業: 鄭和の大航海、紫禁城建設',
          '領土: 明の最大版図',
        ];
      }
      if (year >= 1572 && year <= 1620) {
        return [
          '首都: 北京',
          '皇帝: 万暦帝（在位1572-1620年）',
          '政体: 帝政',
          '改革: 張居正の改革',
          '危機: 豊臣秀吉の朝鮮出兵',
        ];
      }
      return ['首都: 北京', '政体: 帝政', '人口: 約1億5000万人'];
    },
    events: [
      { year: 1368, event: '朱元璋が建国' },
      { year: 1405, event: '鄭和の大航海開始' },
      { year: 1644, event: '滅亡' },
    ],
  },
  'Ming Empire': {
    name: '明',
    facts: (year) => {
      if (year >= 1402 && year <= 1424) {
        return [
          '首都: 北京',
          '皇帝: 永楽帝（在位1402-1424年）',
          '政体: 帝政',
          '事業: 鄭和の大航海（7回）',
          '建築: 紫禁城完成',
        ];
      }
      return ['首都: 北京', '政体: 帝政', '特徴: 中国最後の漢民族王朝'];
    },
    events: [
      { year: 1368, event: '朱元璋が建国' },
      { year: 1421, event: '永楽帝が北京に遷都' },
    ],
  },
  'Ming Chinese Empire': {
    name: '明',
    facts: (year) => {
      if (year >= 1405 && year <= 1433) {
        return [
          '首都: 北京',
          '政体: 帝政',
          '事業: 鄭和の大航海',
          '艦隊: 世界最大の海軍力',
          '到達: アフリカ東岸まで',
        ];
      }
      return ['首都: 北京', '政体: 帝政'];
    },
    events: [
      { year: 1368, event: '朱元璋が建国' },
      { year: 1405, event: '鄭和の大航海開始' },
    ],
  },
  'Manchu Empire': {
    name: '清',
    facts: (year) => {
      if (year >= 1661 && year <= 1722) {
        return [
          '首都: 北京',
          '皇帝: 康熙帝（在位1661-1722年）',
          '政体: 帝政（満洲族王朝）',
          '特徴: 清朝最盛期、三藩の乱鎮圧',
          '人口: 約1億5000万人',
        ];
      }
      if (year >= 1735 && year <= 1796) {
        return [
          '首都: 北京',
          '皇帝: 乾隆帝（在位1735-1796年）',
          '政体: 帝政（満洲族王朝）',
          '特徴: 最大版図、文化の黄金期',
          '人口: 約3億人',
        ];
      }
      if (year >= 1644 && year <= 1661) {
        return [
          '首都: 北京',
          '皇帝: 順治帝（在位1644-1661年）',
          '政体: 帝政（満洲族王朝）',
          '摂政: ドルゴン（〜1650年）',
          '状況: 中国統一戦争中',
        ];
      }
      return ['首都: 北京', '政体: 帝政（満洲族王朝）', '民族: 満洲族支配'];
    },
    events: [
      { year: 1644, event: '北京入城、中国支配開始' },
      { year: 1661, event: '康熙帝即位' },
      { year: 1912, event: '滅亡' },
    ],
  },
  'Qing Empire': {
    name: '清',
    facts: (year) => {
      if (year >= 1839 && year <= 1861) {
        return [
          '首都: 北京',
          '皇帝: 道光帝/咸豊帝',
          '政体: 帝政',
          '危機: アヘン戦争、太平天国の乱',
          '状況: 西洋列強の圧力下',
        ];
      }
      return ['首都: 北京', '政体: 帝政', '民族: 満洲族支配'];
    },
    events: [
      { year: 1644, event: '北京入城' },
      { year: 1839, event: 'アヘン戦争開始' },
      { year: 1912, event: '辛亥革命により滅亡' },
    ],
  },
  China: {
    name: '中国',
    capital: '北京',
    type: '共和制',
    events: [
      { year: 1949, event: '中華人民共和国成立' },
      { year: 1978, event: '改革開放政策開始' },
    ],
  },
  'Sixteen Kingdoms': {
    name: '五胡十六国',
    capital: '各地',
    type: '分裂時代',
    events: [{ year: 304, event: '五胡十六国時代開始' }],
  },

  // Persian/Iranian
  'Parthian Empire': {
    name: 'パルティア帝国',
    facts: (year) => {
      if (year >= -247 && year <= -171) {
        return [
          '首都: ニサ',
          '時代: 初期アルサケス朝',
          '政体: 帝政',
          '特徴: セレウコス朝から独立、建国期',
          '領土: イラン高原東部',
        ];
      }
      if (year >= -171 && year <= -138) {
        return [
          '首都: ヘカトンピュロス',
          '君主: ミトラダテス1世',
          '政体: 帝政',
          '特徴: 最盛期、メソポタミア征服',
          '領土: ユーフラテス川からインドまで',
        ];
      }
      if (year >= -53 && year <= 224) {
        return [
          '首都: クテシフォン',
          '政体: 帝政',
          '特徴: ローマとの長期対立',
          '軍事: 重装騎兵（カタフラクト）',
          '領土: イラン、メソポタミア',
        ];
      }
      return ['首都: クテシフォン', '政体: 帝政', '特徴: ローマの好敵手'];
    },
    events: [
      { year: -247, event: 'アルサケス1世が建国' },
      { year: -53, event: 'カルラエの戦いでローマに勝利' },
      { year: 224, event: 'ササン朝により滅亡' },
    ],
  },
  'Sasanian Empire': {
    name: 'ササン朝ペルシア',
    capital: 'クテシフォン',
    type: '帝政',
    events: [
      { year: 224, event: 'アルダシール1世が建国' },
      { year: 260, event: 'ローマ皇帝ウァレリアヌスを捕虜に' },
      { year: 651, event: 'アラブに滅ぼされる' },
    ],
  },
  'Safavid Empire': {
    name: 'サファヴィー朝',
    facts: (year) => {
      if (year >= 1588 && year <= 1629) {
        return [
          '首都: イスファハーン',
          '君主: アッバース1世（在位1588-1629年）',
          '政体: シャー制（王政）',
          '宗教: シーア派イスラム教（国教）',
          '特徴: 最盛期、「世界の半分」と称された首都',
        ];
      }
      if (year >= 1642 && year <= 1666) {
        return [
          '首都: イスファハーン',
          '君主: アッバース2世（在位1642-1666年）',
          '政体: シャー制（王政）',
          '宗教: シーア派イスラム教（国教）',
          '交易: シルクロード貿易の要衝',
        ];
      }
      return ['首都: イスファハーン', '政体: シャー制（王政）', '宗教: シーア派イスラム教'];
    },
    events: [
      { year: 1501, event: 'イスマーイール1世が建国' },
      { year: 1588, event: 'アッバース1世即位、最盛期へ' },
      { year: 1736, event: '滅亡' },
    ],
  },
  Persia: {
    name: 'ペルシア',
    capital: 'クテシフォン',
    type: '帝政',
    events: [{ year: -550, event: 'キュロス2世がアケメネス朝を建国' }],
  },
  'Achaemenid Empire': {
    name: 'アケメネス朝ペルシア',
    facts: (year) => {
      if (year >= -550 && year <= -530) {
        return [
          '首都: パサルガダエ',
          '大王: キュロス2世（建国者）',
          '政体: 帝政',
          '特徴: 世界初の大帝国、寛容な統治',
        ];
      }
      if (year >= -522 && year <= -486) {
        return [
          '首都: ペルセポリス/スーサ',
          '大王: ダレイオス1世',
          '政体: 帝政（サトラップ制）',
          '特徴: 最大版図、王の道整備',
          '領土: エジプトからインドまで',
        ];
      }
      if (year >= -486 && year <= -465) {
        return [
          '首都: ペルセポリス',
          '大王: クセルクセス1世',
          '政体: 帝政',
          '出来事: ペルシア戦争（ギリシャ遠征）',
        ];
      }
      return ['首都: ペルセポリス', '政体: 帝政', '特徴: 古代オリエント最大の帝国'];
    },
    events: [
      { year: -550, event: 'キュロス2世が建国' },
      { year: -490, event: 'マラトンの戦い' },
      { year: -330, event: 'アレクサンドロスにより滅亡' },
    ],
  },
  'Timurid Empire': {
    name: 'ティムール帝国',
    capital: 'サマルカンド',
    type: '帝政',
    events: [
      { year: 1370, event: 'ティムールが建国' },
      { year: 1402, event: 'アンカラの戦いでオスマン軍を破る' },
    ],
  },

  // Islamic
  'Umayyad Caliphate': {
    name: 'ウマイヤ朝',
    facts: (year) => {
      if (year >= 661 && year <= 680) {
        return [
          '首都: ダマスカス',
          'カリフ: ムアーウィヤ1世（在位661-680年）',
          '政体: カリフ制（世襲王朝化）',
          '特徴: 初のイスラム世襲王朝',
          '領土: アラビア半島、シリア、エジプト',
        ];
      }
      if (year >= 705 && year <= 715) {
        return [
          '首都: ダマスカス',
          'カリフ: ワリード1世（在位705-715年）',
          '政体: カリフ制',
          '特徴: 最大版図、イベリア半島・中央アジア征服',
          '建築: ダマスカスのウマイヤ・モスク',
        ];
      }
      return ['首都: ダマスカス', '政体: カリフ制', '領土: 西はイベリアから東はインドまで'];
    },
    events: [
      { year: 661, event: 'ムアーウィヤが建国' },
      { year: 711, event: 'イベリア半島征服開始' },
      { year: 750, event: 'アッバース朝により滅亡' },
    ],
  },
  'Abbasid Caliphate': {
    name: 'アッバース朝',
    facts: (year) => {
      if (year >= 786 && year <= 809) {
        return [
          '首都: バグダード',
          'カリフ: ハールーン・アッラシード（在位786-809年）',
          '政体: カリフ制',
          '特徴: イスラム黄金時代の最盛期',
          '文化: 千夜一夜物語、知恵の館',
        ];
      }
      if (year >= 750 && year <= 786) {
        return [
          '首都: バグダード（762年建設）',
          '政体: カリフ制',
          '特徴: アッバース革命後の新王朝',
          '政策: ペルシア文化の影響',
        ];
      }
      if (year >= 809 && year <= 1258) {
        return [
          '首都: バグダード',
          '政体: カリフ制（実権衰退）',
          '状況: トルコ系軍人の台頭、地方政権の独立',
        ];
      }
      return ['首都: バグダード', '政体: カリフ制', '文化: イスラム黄金時代'];
    },
    events: [
      { year: 750, event: 'アブー・アルアッバースが建国' },
      { year: 762, event: 'バグダード建設' },
      { year: 1258, event: 'モンゴル軍により滅亡' },
    ],
  },
  'Ottoman Empire': {
    name: 'オスマン帝国',
    facts: (year) => {
      if (year >= 1520 && year <= 1566) {
        return [
          '首都: イスタンブール',
          '君主: スレイマン1世（在位1520-1566年）',
          '政体: スルタン制',
          '別称: 「壮麗帝」の治世、最盛期',
          '領土: バルカン半島、中東、北アフリカ',
        ];
      }
      if (year >= 1648 && year <= 1687) {
        return [
          '首都: イスタンブール',
          '君主: メフメト4世（在位1648-1687年）',
          '政体: スルタン制',
          '宰相: キョプリュリュ家による改革期',
          '領土: バルカン半島、中東、北アフリカ',
        ];
      }
      if (year >= 1876 && year <= 1909) {
        return [
          '首都: イスタンブール',
          '君主: アブデュルハミト2世（在位1876-1909年）',
          '政体: 専制君主制',
          '状況: 「瀕死の病人」と呼ばれる衰退期',
        ];
      }
      return ['首都: イスタンブール', '政体: スルタン制', '宗教: イスラム教スンナ派'];
    },
    events: [
      { year: 1299, event: 'オスマン1世が建国' },
      { year: 1453, event: 'コンスタンティノープル征服' },
      { year: 1922, event: '滅亡' },
    ],
  },
  'Fatimid Caliphate': {
    name: 'ファーティマ朝',
    capital: 'カイロ',
    type: 'カリフ制',
    events: [
      { year: 909, event: '北アフリカで建国' },
      { year: 969, event: 'エジプト征服、カイロ建設' },
    ],
  },
  'Seljuk Empire': {
    name: 'セルジューク朝',
    capital: 'イスファハーン',
    type: 'スルタン制',
    events: [
      { year: 1037, event: 'トゥグリル・ベクが建国' },
      { year: 1071, event: 'マンジケルトの戦いでビザンツに勝利' },
    ],
  },

  // Indian
  'Gupta Empire': {
    name: 'グプタ朝',
    facts: (year) => {
      if (year >= 320 && year <= 335) {
        return [
          '首都: パータリプトラ',
          '君主: チャンドラグプタ1世（建国者）',
          '政体: 帝政',
          '特徴: グプタ朝の創始',
          '領土: マガダ地方',
        ];
      }
      if (year >= 375 && year <= 415) {
        return [
          '首都: パータリプトラ',
          '君主: チャンドラグプタ2世（超日王）',
          '政体: 帝政',
          '特徴: グプタ朝最盛期「インドの黄金時代」',
          '文化: 詩人カーリダーサ、ナーランダ僧院',
        ];
      }
      if (year >= 335 && year <= 375) {
        return [
          '首都: パータリプトラ',
          '君主: サムドラグプタ',
          '政体: 帝政',
          '特徴: 領土拡大、「インドのナポレオン」',
        ];
      }
      return ['首都: パータリプトラ', '政体: 帝政', '文化: インドの黄金時代'];
    },
    events: [
      { year: 320, event: 'チャンドラグプタ1世が建国' },
      { year: 375, event: 'チャンドラグプタ2世即位、最盛期へ' },
    ],
  },
  'Mughal Empire': {
    name: 'ムガル帝国',
    facts: (year) => {
      if (year >= 1556 && year <= 1605) {
        return [
          '首都: アーグラ/ファテープル・シークリー',
          '君主: アクバル大帝（在位1556-1605年）',
          '政体: 帝政',
          '特徴: 宗教寛容政策、ヒンドゥーとの融和',
          '人口: 約1億人',
        ];
      }
      if (year >= 1628 && year <= 1658) {
        return [
          '首都: アーグラ',
          '君主: シャー・ジャハーン（在位1628-1658年）',
          '政体: 帝政',
          '建築: タージ・マハル建設（1632-1653年）',
          '人口: 約1億人',
        ];
      }
      if (year >= 1658 && year <= 1707) {
        return [
          '首都: デリー',
          '君主: アウラングゼーブ（在位1658-1707年）',
          '政体: 帝政',
          '特徴: 最大版図達成、イスラム正統主義',
          '領土: インド亜大陸のほぼ全域',
        ];
      }
      return ['首都: デリー/アーグラ', '政体: 帝政', '宗教: イスラム教'];
    },
    events: [
      { year: 1526, event: 'バーブルが建国' },
      { year: 1556, event: 'アクバル即位' },
      { year: 1658, event: 'アウラングゼーブ即位、最大版図へ' },
    ],
  },
  'Mauryan Empire': {
    name: 'マウリヤ朝',
    facts: (year) => {
      if (year >= -322 && year <= -298) {
        return [
          '首都: パータリプトラ',
          '君主: チャンドラグプタ・マウリヤ（建国者）',
          '政体: 帝政',
          '特徴: インド初の統一帝国',
          '宰相: カウティリヤ（『実利論』著者）',
        ];
      }
      if (year >= -268 && year <= -232) {
        return [
          '首都: パータリプトラ',
          '君主: アショーカ王（在位前268-232年）',
          '政体: 帝政',
          '宗教: 仏教への帰依、仏教布教',
          '特徴: マウリヤ朝最盛期、非暴力の統治',
        ];
      }
      return ['首都: パータリプトラ', '政体: 帝政', '領土: インド亜大陸の大部分'];
    },
    events: [
      { year: -322, event: 'チャンドラグプタが建国' },
      { year: -268, event: 'アショーカ王即位' },
    ],
  },
  India: {
    name: 'インド',
    capital: 'ニューデリー',
    type: '連邦共和制',
    events: [
      { year: 1947, event: 'イギリスから独立' },
      { year: 1950, event: 'インド共和国憲法施行' },
    ],
  },
  'British Raj': {
    name: '英領インド',
    capital: 'カルカッタ/デリー',
    type: '植民地',
    events: [
      { year: 1858, event: 'イギリス直轄統治開始' },
      { year: 1947, event: 'インド・パキスタン分離独立' },
    ],
  },

  // European kingdoms/empires
  'Frankish Kingdom': {
    name: 'フランク王国',
    capital: 'パリ/アーヘン',
    type: '王政',
    events: [
      { year: 481, event: 'クローヴィス1世即位' },
      { year: 768, event: 'カール大帝即位' },
      { year: 843, event: 'ヴェルダン条約で分裂' },
    ],
  },
  'Carolingian Empire': {
    name: 'カロリング帝国',
    capital: 'アーヘン',
    type: '帝政',
    events: [
      { year: 800, event: 'カール大帝がローマ皇帝として戴冠' },
      { year: 843, event: 'ヴェルダン条約で分裂' },
    ],
  },
  France: {
    name: 'フランス',
    facts: (year) => {
      if (year >= 1643 && year <= 1715) {
        return [
          '首都: パリ',
          '君主: ルイ14世（在位1643-1715年）',
          '政体: 絶対王政',
          '宰相: マザラン枢機卿（〜1661年）',
          '人口: 約2000万人',
        ];
      }
      if (year >= 1958) {
        return ['首都: パリ', '政体: 共和制', '大統領: 第五共和制（1958年〜）'];
      }
      if (year >= 1792 && year < 1804) {
        return ['首都: パリ', '政体: 共和制（第一共和政）'];
      }
      return ['首都: パリ', '政体: 王政/共和制'];
    },
    events: [
      { year: 1643, event: 'ルイ14世即位' },
      { year: 1789, event: 'フランス革命' },
      { year: 1958, event: '第五共和制成立' },
    ],
  },
  'Kingdom of France': {
    name: 'フランス王国',
    facts: ['首都: パリ', '政体: 王政'],
    events: [
      { year: 987, event: 'カペー朝成立' },
      { year: 1337, event: '百年戦争開始' },
      { year: 1789, event: 'フランス革命で王政廃止' },
    ],
  },
  England: {
    name: 'イングランド王国',
    facts: ['首都: ロンドン', '政体: 王政'],
    events: [
      { year: 1066, event: 'ノルマン征服' },
      { year: 1215, event: 'マグナカルタ制定' },
      { year: 1707, event: 'スコットランドと合併' },
    ],
  },
  'England and Ireland': {
    name: 'イングランド・アイルランド',
    facts: (year) => {
      if (year === 1650) {
        return [
          '首都: ロンドン',
          '政体: 共和制（コモンウェルス）',
          '指導者: オリバー・クロムウェル',
          '備考: ピューリタン革命後の共和制期',
        ];
      }
      return ['首都: ロンドン', '政体: 王政/共和制'];
    },
    events: [
      { year: 1649, event: 'チャールズ1世処刑、共和制開始' },
      { year: 1653, event: 'クロムウェルが護国卿に就任' },
      { year: 1660, event: '王政復古' },
    ],
  },
  'Angevin Empire': {
    name: 'アンジュー帝国',
    capital: 'ロンドン/パリ',
    type: '王政',
    events: [
      { year: 1154, event: 'ヘンリー2世即位' },
      { year: 1189, event: 'リチャード1世即位' },
    ],
  },
  Spain: {
    name: 'スペイン王国',
    facts: (year) => {
      if (year >= 1621 && year <= 1665) {
        return [
          '首都: マドリード',
          '君主: フェリペ4世（在位1621-1665年）',
          '政体: 絶対王政',
          '植民地: 中南米、フィリピン、ネーデルラント南部',
        ];
      }
      if (year >= 1556 && year <= 1598) {
        return [
          '首都: マドリード',
          '君主: フェリペ2世（在位1556-1598年）',
          '政体: 絶対王政',
          '植民地: 中南米、フィリピン、ポルトガル（1580-1640）',
        ];
      }
      return ['首都: マドリード', '政体: 王政'];
    },
    events: [
      { year: 1469, event: 'カスティーリャとアラゴンの統合' },
      { year: 1492, event: 'グラナダ陥落、新大陸発見' },
      { year: 1588, event: '無敵艦隊の敗北' },
    ],
  },
  Portugal: {
    name: 'ポルトガル王国',
    capital: 'リスボン',
    type: '王政',
    events: [
      { year: 1139, event: '王国として独立' },
      { year: 1498, event: 'ヴァスコ・ダ・ガマがインド航路開拓' },
    ],
  },
  'Holy Roman Empire': {
    name: '神聖ローマ帝国',
    capital: 'ウィーン',
    type: '帝政（選挙王制）',
    events: [
      { year: 962, event: 'オットー1世が皇帝に戴冠' },
      { year: 1618, event: '三十年戦争開始' },
      { year: 1806, event: '解体' },
    ],
  },
  'Austrian Empire': {
    name: 'オーストリア帝国',
    capital: 'ウィーン',
    type: '帝政',
    events: [
      { year: 1804, event: 'フランツ2世がオーストリア皇帝に即位' },
      { year: 1867, event: 'オーストリア＝ハンガリー二重帝国成立' },
    ],
  },
  Austria: {
    name: 'オーストリア',
    capital: 'ウィーン',
    type: '共和制',
    events: [
      { year: 1918, event: '第一共和国成立' },
      { year: 1938, event: 'ナチス・ドイツに併合' },
      { year: 1955, event: '主権回復' },
    ],
  },
  'Austria-Hungary': {
    name: 'オーストリア＝ハンガリー帝国',
    capital: 'ウィーン',
    type: '帝政',
    events: [
      { year: 1867, event: '二重帝国成立' },
      { year: 1914, event: '第一次世界大戦開戦' },
      { year: 1918, event: '解体' },
    ],
  },
  'Austro-Hungarian Empire': {
    name: 'オーストリア＝ハンガリー帝国',
    capital: 'ウィーン',
    type: '帝政',
    events: [
      { year: 1867, event: '二重帝国成立' },
      { year: 1914, event: '第一次世界大戦開戦' },
    ],
  },
  Prussia: {
    name: 'プロイセン王国',
    facts: (year) => {
      if (year >= 1740 && year <= 1786) {
        return [
          '首都: ベルリン',
          '君主: フリードリヒ2世（大王）',
          '政体: 啓蒙専制君主制',
          '特徴: 軍事大国化、啓蒙思想',
          '戦争: シュレジエン戦争、七年戦争',
        ];
      }
      if (year >= 1797 && year <= 1840) {
        return [
          '首都: ベルリン',
          '君主: フリードリヒ・ヴィルヘルム3世',
          '政体: 王政',
          '危機: ナポレオン戦争、屈辱と復興',
          '改革: シュタイン・ハルデンベルク改革',
        ];
      }
      if (year >= 1861 && year <= 1888) {
        return [
          '首都: ベルリン',
          '君主: ヴィルヘルム1世',
          '政体: 立憲君主制',
          '宰相: オットー・フォン・ビスマルク',
          '事業: ドイツ統一（1871年）',
        ];
      }
      return ['首都: ベルリン', '政体: 王政', '特徴: 軍事大国'];
    },
    events: [
      { year: 1701, event: 'フリードリヒ1世が王に即位' },
      { year: 1740, event: 'フリードリヒ大王即位' },
      { year: 1871, event: 'ドイツ帝国統一の中心に' },
    ],
  },
  'German Empire': {
    name: 'ドイツ帝国',
    facts: (year) => {
      if (year >= 1871 && year <= 1890) {
        return [
          '首都: ベルリン',
          '皇帝: ヴィルヘルム1世',
          '政体: 立憲君主制（連邦制）',
          '宰相: オットー・フォン・ビスマルク',
          '特徴: 鉄血宰相の時代、ヨーロッパ外交の中心',
        ];
      }
      if (year >= 1888 && year <= 1918) {
        return [
          '首都: ベルリン',
          '皇帝: ヴィルヘルム2世（在位1888-1918年）',
          '政体: 立憲君主制',
          '政策: 世界政策、海軍拡張',
          '危機: 第一次世界大戦（1914-1918年）',
        ];
      }
      return ['首都: ベルリン', '政体: 帝政', '特徴: ヨーロッパ最強の陸軍'];
    },
    events: [
      { year: 1871, event: 'ヴィルヘルム1世が皇帝に即位' },
      { year: 1914, event: '第一次世界大戦開戦' },
      { year: 1918, event: '帝政廃止' },
    ],
  },
  Germany: {
    name: 'ドイツ',
    capital: 'ベルリン',
    type: '連邦共和制',
    events: [
      { year: 1949, event: '東西分裂' },
      { year: 1990, event: '東西ドイツ統一' },
    ],
  },
  'East Germany': {
    name: '東ドイツ',
    capital: '東ベルリン',
    type: '社会主義共和制',
    events: [
      { year: 1949, event: 'ドイツ民主共和国成立' },
      { year: 1961, event: 'ベルリンの壁建設' },
      { year: 1990, event: '西ドイツと統一' },
    ],
  },
  Russia: {
    name: 'ロシア',
    capital: 'モスクワ',
    type: '連邦共和制',
    events: [
      { year: 1991, event: 'ソ連崩壊、ロシア連邦成立' },
      { year: 2000, event: 'プーチン大統領就任' },
    ],
  },
  'Russian Empire': {
    name: 'ロシア帝国',
    facts: (year) => {
      if (year >= 1682 && year <= 1725) {
        return [
          '首都: サンクトペテルブルク（1712年〜）',
          '皇帝: ピョートル1世（大帝）',
          '政体: 帝政',
          '特徴: 西欧化改革、近代化',
          '事業: サンクトペテルブルク建設',
        ];
      }
      if (year >= 1762 && year <= 1796) {
        return [
          '首都: サンクトペテルブルク',
          '皇帝: エカチェリーナ2世（大帝）',
          '政体: 帝政',
          '特徴: 啓蒙専制君主、領土拡大',
          '領土: ポーランド分割、黒海進出',
        ];
      }
      if (year >= 1855 && year <= 1881) {
        return [
          '首都: サンクトペテルブルク',
          '皇帝: アレクサンドル2世',
          '政体: 帝政',
          '改革: 農奴解放令（1861年）',
          '状況: 「改革の時代」',
        ];
      }
      if (year >= 1894 && year <= 1917) {
        return [
          '首都: サンクトペテルブルク',
          '皇帝: ニコライ2世（最後の皇帝）',
          '政体: 帝政',
          '危機: 日露戦争敗北、第一次大革命',
          '人口: 約1億7000万人',
        ];
      }
      return ['首都: サンクトペテルブルク', '政体: 帝政', '領土: ユーラシア最大'];
    },
    events: [
      { year: 1721, event: 'ピョートル1世が皇帝に即位' },
      { year: 1812, event: 'ナポレオンのロシア遠征撃退' },
      { year: 1917, event: 'ロシア革命で帝政廃止' },
    ],
  },
  'Tsardom of Muscovy': {
    name: 'モスクワ大公国',
    capital: 'モスクワ',
    type: '大公国',
    events: [
      { year: 1480, event: 'モンゴル支配から独立' },
      { year: 1547, event: 'イヴァン4世がツァーリを称する' },
    ],
  },
  Sweden: {
    name: 'スウェーデン王国',
    capital: 'ストックホルム',
    type: '王政',
    events: [
      { year: 1523, event: 'グスタフ1世が独立を達成' },
      { year: 1630, event: '三十年戦争参戦' },
    ],
  },
  Poland: {
    name: 'ポーランド',
    capital: 'ワルシャワ',
    type: '共和制',
    events: [
      { year: 1918, event: '独立回復' },
      { year: 1939, event: 'ナチス・ドイツに侵攻される' },
      { year: 1989, event: '民主化' },
    ],
  },
  'Polish–Lithuanian Commonwealth': {
    name: 'ポーランド・リトアニア共和国',
    capital: 'ワルシャワ',
    type: '共和制',
    events: [
      { year: 1569, event: 'ルブリン合同で成立' },
      { year: 1683, event: 'ウィーン包囲を解く' },
      { year: 1795, event: '第三次分割で消滅' },
    ],
  },
  'Dutch Republic': {
    name: 'ネーデルラント連邦共和国',
    facts: (year) => {
      if (year >= 1625 && year <= 1650) {
        return [
          '首都: ハーグ（政治）/アムステルダム（経済）',
          '政体: 連邦共和制',
          '総督: フレデリック・ヘンドリック（〜1647年）',
          '特徴: 「オランダ黄金時代」',
          '経済: 世界貿易の中心、VOC（東インド会社）',
        ];
      }
      if (year >= 1650 && year <= 1672) {
        return [
          '首都: ハーグ（政治）/アムステルダム（経済）',
          '政体: 連邦共和制（無総督時代）',
          '指導者: ヨハン・デ・ウィット（大年金官）',
          '特徴: 「真の自由」時代',
          '経済: 世界貿易・金融の中心',
        ];
      }
      return ['首都: アムステルダム', '政体: 連邦共和制', '経済: 海上貿易大国'];
    },
    events: [
      { year: 1581, event: 'スペインから独立宣言' },
      { year: 1602, event: 'オランダ東インド会社設立' },
      { year: 1648, event: 'ウェストファリア条約で独立承認' },
    ],
  },
  Venice: {
    name: 'ヴェネツィア共和国',
    capital: 'ヴェネツィア',
    type: '共和制',
    events: [
      { year: 1204, event: '第四回十字軍を主導' },
      { year: 1797, event: 'ナポレオンにより滅亡' },
    ],
  },
  'United Kingdom of Great Britain and Ireland': {
    name: 'グレートブリテン及びアイルランド連合王国',
    capital: 'ロンドン',
    type: '立憲君主制',
    events: [
      { year: 1801, event: '連合王国成立' },
      { year: 1837, event: 'ヴィクトリア女王即位' },
      { year: 1922, event: 'アイルランド自由国独立' },
    ],
  },

  // Japanese
  'Tokugawa Shogunate': {
    name: '江戸幕府',
    facts: (year) => {
      if (year >= 1603 && year <= 1605) {
        return [
          '首都: 江戸',
          '将軍: 徳川家康（初代、在職1603-1605年）',
          '政体: 幕藩体制',
          '天皇: 後陽成天皇',
          '状況: 幕府創設期',
        ];
      }
      if (year >= 1623 && year <= 1651) {
        return [
          '首都: 江戸',
          '将軍: 徳川家光（3代、在職1623-1651年）',
          '政体: 幕藩体制',
          '政策: 鎖国体制確立（1639年）',
          '人口: 約1200万人',
        ];
      }
      if (year >= 1651 && year <= 1680) {
        return [
          '首都: 江戸',
          '将軍: 徳川家綱（4代、在職1651-1680年）',
          '政体: 幕藩体制',
          '状況: 文治政治への転換',
          '人口: 約2500万人',
        ];
      }
      return ['首都: 江戸', '政体: 幕藩体制', '対外政策: 鎖国（長崎出島のみ開港）'];
    },
    events: [
      { year: 1603, event: '徳川家康が征夷大将軍に就任' },
      { year: 1639, event: '鎖国体制確立' },
      { year: 1868, event: '大政奉還' },
    ],
  },
  Japan: {
    name: '日本',
    facts: (year) => {
      if (year >= 794 && year <= 1185) {
        return [
          '首都: 平安京（京都）',
          '天皇: 平安時代',
          '政体: 律令制・摂関政治',
          '特徴: 国風文化の発展',
        ];
      }
      if (year >= 1945 && year <= 1952) {
        return [
          '首都: 東京',
          '天皇: 昭和天皇',
          '政体: 連合国占領下',
          '総司令官: ダグラス・マッカーサー',
          '状況: 戦後復興期',
        ];
      }
      if (year >= 1960 && year <= 1989) {
        return [
          '首都: 東京',
          '天皇: 昭和天皇',
          '政体: 立憲君主制（象徴天皇制）',
          '特徴: 高度経済成長',
          '人口: 約1億人',
        ];
      }
      if (year >= 1989) {
        return [
          '首都: 東京',
          '天皇: 平成天皇/令和天皇',
          '政体: 立憲君主制（象徴天皇制）',
          '人口: 約1億2000万人',
        ];
      }
      return ['首都: 東京', '政体: 立憲君主制'];
    },
    events: [
      { year: 1947, event: '日本国憲法施行' },
      { year: 1964, event: '東京オリンピック開催' },
    ],
  },
  'Japan (USA)': {
    name: '日本（米国占領下）',
    facts: [
      '首都: 東京',
      '天皇: 昭和天皇',
      '政体: 連合国占領下',
      '総司令官: ダグラス・マッカーサー',
      '状況: 戦後復興・民主化改革',
    ],
    events: [
      { year: 1945, event: '終戦、連合国占領開始' },
      { year: 1946, event: '日本国憲法公布' },
      { year: 1952, event: 'サンフランシスコ講和条約発効、主権回復' },
    ],
  },
  'Imperial Japan': {
    name: '大日本帝国',
    facts: (year) => {
      if (year >= 1868 && year <= 1912) {
        return [
          '首都: 東京',
          '天皇: 明治天皇（在位1867-1912年）',
          '政体: 立憲君主制',
          '特徴: 明治維新、富国強兵',
          '人口: 約3500万人→5000万人',
        ];
      }
      if (year >= 1912 && year <= 1926) {
        return [
          '首都: 東京',
          '天皇: 大正天皇（在位1912-1926年）',
          '政体: 立憲君主制',
          '特徴: 大正デモクラシー',
        ];
      }
      return ['首都: 東京', '政体: 立憲君主制', '特徴: 近代化・帝国主義'];
    },
    events: [
      { year: 1868, event: '明治維新' },
      { year: 1894, event: '日清戦争' },
      { year: 1904, event: '日露戦争' },
    ],
  },
  'Empire of Japan': {
    name: '大日本帝国',
    facts: (year) => {
      if (year >= 1926 && year <= 1945) {
        return [
          '首都: 東京',
          '天皇: 昭和天皇（在位1926-1989年）',
          '政体: 立憲君主制',
          '状況: 軍国主義・太平洋戦争',
        ];
      }
      return ['首都: 東京', '天皇: 昭和天皇', '政体: 立憲君主制'];
    },
    events: [
      { year: 1868, event: '明治維新' },
      { year: 1889, event: '大日本帝国憲法発布' },
      { year: 1945, event: '敗戦、連合国占領開始' },
    ],
  },
  'Imperial Japan (Fujiwara)': {
    name: '日本（摂関時代）',
    facts: (year) => {
      if (year >= 967 && year <= 1068) {
        return [
          '首都: 平安京（京都）',
          '政体: 摂関政治',
          '摂政/関白: 藤原氏',
          '特徴: 藤原氏全盛期、国風文化',
          '文化: 源氏物語、枕草子',
        ];
      }
      return ['首都: 平安京', '政体: 摂関政治', '実権: 藤原氏'];
    },
    events: [
      { year: 794, event: '平安京遷都' },
      { year: 1016, event: '藤原道長が摂政就任' },
      { year: 1086, event: '院政開始' },
    ],
  },
  'Shogun Japan (Kamakura)': {
    name: '日本（鎌倉幕府）',
    facts: (year) => {
      if (year >= 1185 && year <= 1333) {
        return [
          '首都: 鎌倉（幕府）/京都（朝廷）',
          '政体: 幕府制（武家政権）',
          '将軍: 源氏→摂家→皇族',
          '執権: 北条氏',
          '特徴: 武家政権の確立',
        ];
      }
      return ['首都: 鎌倉', '政体: 幕府制'];
    },
    events: [
      { year: 1185, event: '壇ノ浦の戦い、平氏滅亡' },
      { year: 1274, event: '文永の役（元寇）' },
      { year: 1333, event: '鎌倉幕府滅亡' },
    ],
  },
  'Japan (Warring States)': {
    name: '日本（戦国時代）',
    facts: (year) => {
      if (year >= 1467 && year <= 1590) {
        return [
          '首都: 京都（名目上）',
          '政体: 戦国大名割拠',
          '状況: 群雄割拠、下剋上',
          '主要大名: 織田・豊臣・徳川・武田・上杉等',
        ];
      }
      if (year >= 1590 && year <= 1603) {
        return ['首都: 大坂/伏見', '政体: 豊臣政権', '関白: 豊臣秀吉', '特徴: 天下統一'];
      }
      return ['首都: 京都', '政体: 戦国大名割拠'];
    },
    events: [
      { year: 1467, event: '応仁の乱勃発' },
      { year: 1582, event: '本能寺の変' },
      { year: 1600, event: '関ヶ原の戦い' },
    ],
  },

  // Korean
  Korea: {
    name: '朝鮮',
    facts: (year) => {
      if (year >= 1392 && year <= 1897) {
        return ['首都: 漢城（ソウル）', '王朝: 李氏朝鮮', '政体: 王政', '思想: 儒教（朱子学）'];
      }
      if (year >= 1897 && year <= 1910) {
        return ['首都: 漢城', '国名: 大韓帝国', '皇帝: 高宗', '政体: 帝政', '状況: 日本の影響下'];
      }
      return ['首都: 漢城', '政体: 王政'];
    },
    events: [
      { year: 1392, event: '李成桂が朝鮮を建国' },
      { year: 1592, event: '文禄の役（壬辰倭乱）' },
      { year: 1910, event: '日本に併合' },
    ],
  },
  'Korea (Republic of)': {
    name: '大韓民国',
    facts: ['首都: ソウル', '政体: 共和制', '特徴: 朝鮮戦争後の分断国家'],
    events: [
      { year: 1948, event: '大韓民国建国' },
      { year: 1950, event: '朝鮮戦争勃発' },
      { year: 1988, event: 'ソウルオリンピック開催' },
    ],
  },
  'Korea (Democratic Peoples Republic of)': {
    name: '朝鮮民主主義人民共和国',
    facts: ['首都: 平壌', '政体: 社会主義共和制', '指導者: 金日成→金正日→金正恩'],
    events: [
      { year: 1948, event: '朝鮮民主主義人民共和国建国' },
      { year: 1950, event: '朝鮮戦争勃発' },
    ],
  },

  // Mongol
  'Mongol Empire': {
    name: 'モンゴル帝国',
    facts: (year) => {
      if (year >= 1206 && year <= 1227) {
        return [
          '首都: カラコルム（建設中）',
          'ハーン: チンギス・ハーン（在位1206-1227年）',
          '政体: ハーン制',
          '領土: 中央アジア、中国北部、ペルシア',
          '特徴: 史上最大の陸上帝国の建設者',
        ];
      }
      if (year >= 1260 && year <= 1294) {
        return [
          '首都: カラコルム/大都（北京）',
          'ハーン: フビライ・ハーン（在位1260-1294年）',
          '政体: ハーン制',
          '特徴: 元朝建国、日本遠征（元寇）',
          '領土: 中国全土、モンゴル高原',
        ];
      }
      if (year >= 1227 && year <= 1259) {
        return [
          '首都: カラコルム',
          'ハーン: オゴデイ→グユク→モンケ',
          '政体: ハーン制',
          '特徴: 西方遠征、最大版図への拡大',
          '領土: ユーラシア大陸の大部分',
        ];
      }
      return ['首都: カラコルム', '政体: ハーン制', '特徴: 史上最大の陸上帝国'];
    },
    events: [
      { year: 1206, event: 'チンギス・ハーンが即位' },
      { year: 1258, event: 'バグダード攻略' },
      { year: 1279, event: '南宋を滅ぼす' },
    ],
  },
  'Golden Horde': {
    name: 'キプチャク・ハン国',
    capital: 'サライ',
    type: 'ハーン制',
    events: [
      { year: 1240, event: 'キエフを征服' },
      { year: 1480, event: 'モスクワに敗北、衰退へ' },
    ],
  },
  Mongolia: {
    name: 'モンゴル',
    capital: 'ウランバートル',
    type: '共和制',
    events: [
      { year: 1924, event: 'モンゴル人民共和国成立' },
      { year: 1990, event: '民主化' },
    ],
  },

  // American
  'United States': {
    name: 'アメリカ合衆国',
    capital: 'ワシントンD.C.',
    type: '連邦共和制',
    events: [
      { year: 1776, event: '独立宣言' },
      { year: 1861, event: '南北戦争開始' },
      { year: 1945, event: '第二次世界大戦勝利' },
    ],
  },
  Mexico: {
    name: 'メキシコ',
    capital: 'メキシコシティ',
    type: '共和制',
    events: [
      { year: 1821, event: 'スペインから独立' },
      { year: 1910, event: 'メキシコ革命開始' },
    ],
  },
  Brazil: {
    name: 'ブラジル',
    capital: 'リオデジャネイロ/ブラジリア',
    type: '共和制',
    events: [
      { year: 1822, event: 'ポルトガルから独立' },
      { year: 1889, event: '共和制に移行' },
    ],
  },
  'Aztec Empire': {
    name: 'アステカ帝国',
    capital: 'テノチティトラン',
    type: '帝政',
    events: [
      { year: 1428, event: 'アステカ三国同盟成立' },
      { year: 1521, event: 'コルテスにより滅亡' },
    ],
  },
  'Inca Empire': {
    name: 'インカ帝国',
    capital: 'クスコ',
    type: '帝政',
    events: [
      { year: 1438, event: 'パチャクティ即位、帝国拡大' },
      { year: 1533, event: 'ピサロにより滅亡' },
    ],
  },
  'Maya states': {
    name: 'マヤ諸国',
    capital: '各都市国家',
    type: '都市国家',
    events: [{ year: 900, event: '古典期終焉、都市の衰退' }],
  },
  'Maya chiefdoms and states': {
    name: 'マヤ諸国',
    capital: '各都市国家',
    type: '都市国家',
    events: [{ year: 900, event: '古典期終焉' }],
  },

  // African
  Ethiopia: {
    name: 'エチオピア',
    capital: 'アディスアベバ',
    type: '帝政/共和制',
    events: [
      { year: 1896, event: 'アドワの戦いでイタリアに勝利' },
      { year: 1974, event: '帝政廃止' },
    ],
  },
  'Empire of Ghana': {
    name: 'ガーナ帝国',
    facts: (year) => {
      if (year >= 830 && year <= 1076) {
        return [
          '首都: クンビ・サレー',
          '政体: 帝政',
          '経済: 金とサハラ交易の中心',
          '特徴: 「黄金の国」として知られる',
          '交易: 金と岩塩の交換',
        ];
      }
      return ['首都: クンビ・サレー', '政体: 帝政', '経済: サハラ交易'];
    },
    events: [
      { year: 830, event: '最盛期到来' },
      { year: 1076, event: 'ムラービト朝に征服される' },
    ],
  },
  Mali: {
    name: 'マリ帝国',
    facts: (year) => {
      if (year >= 1312 && year <= 1337) {
        return [
          '首都: ニアニ',
          '君主: マンサ・ムーサ（在位1312-1337年）',
          '政体: 帝政',
          '特徴: 西アフリカ最大の帝国、黄金の国',
          '巡礼: 1324年メッカ巡礼で黄金配布',
        ];
      }
      if (year >= 1235 && year <= 1255) {
        return [
          '首都: ニアニ',
          '君主: スンジャタ・ケイタ（建国者）',
          '政体: 帝政',
          '特徴: マリ帝国の建国',
          '戦い: キリナの戦いで勝利',
        ];
      }
      return ['首都: ニアニ', '政体: 帝政', '経済: 金とサハラ交易'];
    },
    events: [
      { year: 1235, event: 'スンジャタ・ケイタが建国' },
      { year: 1324, event: 'マンサ・ムーサのメッカ巡礼' },
    ],
  },
  Songhai: {
    name: 'ソンガイ帝国',
    facts: (year) => {
      if (year >= 1464 && year <= 1492) {
        return [
          '首都: ガオ',
          '君主: ソンニ・アリ（在位1464-1492年）',
          '政体: 帝政',
          '特徴: マリを征服、トンブクトゥ占領',
          '軍事: ニジェール川艦隊',
        ];
      }
      if (year >= 1493 && year <= 1528) {
        return [
          '首都: ガオ',
          '君主: アスキア・ムハンマド1世',
          '政体: 帝政',
          '特徴: ソンガイ帝国最盛期',
          '文化: トンブクトゥの学問、イスラム学',
        ];
      }
      return ['首都: ガオ', '政体: 帝政', '経済: サハラ交易'];
    },
    events: [
      { year: 1464, event: 'ソンニ・アリが拡大開始' },
      { year: 1591, event: 'モロッコに敗北、衰退' },
    ],
  },
  'Carthaginian Empire': {
    name: 'カルタゴ',
    capital: 'カルタゴ',
    type: '共和制',
    events: [
      { year: -264, event: '第一次ポエニ戦争開始' },
      { year: -218, event: 'ハンニバルのアルプス越え' },
      { year: -146, event: 'ローマにより滅亡' },
    ],
  },
  'Empire of Alexander': {
    name: 'アレクサンドロス帝国',
    facts: [
      '首都: バビロン',
      '君主: アレクサンドロス3世（大王）',
      '政体: 帝政',
      '領土: ギリシャからインドまで',
      '特徴: 史上最大規模の征服、ヘレニズム文化の拡散',
    ],
    events: [
      { year: -334, event: 'ペルシア遠征開始' },
      { year: -331, event: 'ガウガメラの戦い' },
      { year: -323, event: 'アレクサンドロス死去、帝国分裂' },
    ],
  },

  // Ancient civilizations - Mesopotamia and Anatolia
  'Hurrian Kingdoms': {
    name: 'フルリ人諸王国',
    facts: (year) => {
      if (year <= -3000) {
        return [
          '地域: 北メソポタミア、アナトリア東部',
          '時代: 形成期',
          '文化: フルリ人文化圏の形成',
          '特徴: 山岳地帯の諸部族',
        ];
      }
      if (year >= -2000 && year <= -1500) {
        return [
          '地域: 北メソポタミア、シリア北部',
          '政体: 都市国家群',
          '文化: フルリ語、楔形文字採用',
          '特徴: ミタンニ王国形成前夜',
        ];
      }
      if (year >= -1500 && year <= -1300) {
        return [
          '首都: ワシュカンニ（ミタンニ）',
          '政体: 王政（ミタンニ王国）',
          '特徴: 戦車戦術、馬匹育成',
          '外交: エジプト新王国と同盟',
          '支配: シリア北部、北メソポタミア',
        ];
      }
      return ['地域: 北メソポタミア', '民族: フルリ人', '特徴: 多数の都市国家'];
    },
    events: [
      { year: -1500, event: 'ミタンニ王国最盛期' },
      { year: -1350, event: 'ヒッタイトにより弱体化' },
      { year: -1270, event: 'アッシリアに併合' },
    ],
  },
  'Hittite Empire': {
    name: 'ヒッタイト帝国',
    facts: (year) => {
      if (year >= -1650 && year <= -1500) {
        return [
          '首都: ハットゥシャ',
          '時代: 古王国時代',
          '政体: 王政',
          '君主: ハットゥシリ1世、ムルシリ1世',
          '軍事: バビロン略奪（前1595年）',
        ];
      }
      if (year >= -1430 && year <= -1180) {
        return [
          '首都: ハットゥシャ',
          '時代: 新王国時代（帝国期）',
          '政体: 帝政',
          '君主: シュッピルリウマ1世、ムワタリ2世',
          '特徴: エジプトと並ぶ大国、鉄器使用',
        ];
      }
      return ['首都: ハットゥシャ', '政体: 王政', '技術: 鉄器製造'];
    },
    events: [
      { year: -1650, event: '古王国成立' },
      { year: -1595, event: 'バビロン略奪' },
      { year: -1274, event: 'カデシュの戦い（対エジプト）' },
      { year: -1180, event: '「海の民」により滅亡' },
    ],
  },
  Sumer: {
    name: 'シュメール',
    facts: (year) => {
      if (year <= -4000) {
        return [
          '地域: メソポタミア南部',
          '時代: ウバイド期・ウルク期',
          '文化: 都市文明の発祥',
          '発明: 楔形文字、車輪、青銅器',
          '特徴: 世界最古の都市文明',
        ];
      }
      if (year >= -4000 && year <= -2900) {
        return [
          '地域: メソポタミア南部',
          '時代: ウルク期・ジェムデト・ナスル期',
          '政体: 都市国家形成期',
          '中心都市: ウルク、ウル、エリドゥ',
          '発明: 楔形文字の発達、神殿経済',
        ];
      }
      if (year >= -2900 && year <= -2334) {
        return [
          '地域: メソポタミア南部',
          '時代: 初期王朝時代',
          '政体: 都市国家群（ポリス制）',
          '主要都市: ウル、ウルク、ラガシュ、キシュ',
          '特徴: 都市国家間の抗争',
        ];
      }
      if (year >= -2112 && year <= -2004) {
        return [
          '首都: ウル',
          '時代: ウル第三王朝',
          '政体: 帝政',
          '君主: ウル・ナンム、シュルギ',
          '特徴: シュメール・ルネサンス、最後の隆盛',
        ];
      }
      return ['地域: メソポタミア南部', '文明: 世界最古の都市文明'];
    },
    events: [
      { year: -3500, event: '楔形文字の発明' },
      { year: -2900, event: '初期王朝時代開始' },
      { year: -2334, event: 'アッカドのサルゴンに征服される' },
      { year: -2004, event: 'エラムの侵入でウル第三王朝滅亡' },
    ],
  },
  'Akkadian Empire': {
    name: 'アッカド帝国',
    facts: (year) => {
      if (year >= -2334 && year <= -2279) {
        return [
          '首都: アガデ',
          '君主: サルゴン（在位前2334-2279年）',
          '政体: 帝政',
          '特徴: 世界史上初の帝国',
          '領土: メソポタミア全域からシリアまで',
        ];
      }
      if (year >= -2279 && year <= -2154) {
        return [
          '首都: アガデ',
          '君主: ナラム・シン（最盛期）',
          '政体: 帝政',
          '特徴: 「四方世界の王」を称す',
          '状況: グティ人の侵入で衰退',
        ];
      }
      return ['首都: アガデ', '政体: 帝政', '特徴: 世界初の帝国'];
    },
    events: [
      { year: -2334, event: 'サルゴンが建国' },
      { year: -2254, event: 'ナラム・シン即位、最盛期' },
      { year: -2154, event: 'グティ人の侵入で滅亡' },
    ],
  },
  // Ancient civilizations - Egypt and others
  Egypt: {
    name: '古代エジプト',
    facts: (year) => {
      if (year <= -5000) {
        return [
          '地域: ナイル川流域',
          '時代: 先王朝時代',
          '文化: 農耕・牧畜の発展',
          '特徴: 上下エジプトの形成期',
        ];
      }
      if (year >= -4000 && year <= -3100) {
        return [
          '地域: ナイル川流域',
          '時代: 先王朝時代（ナカダ文化）',
          '政体: 都市国家群',
          '特徴: 上下エジプト統一への過程',
          '文化: 象形文字の発展',
        ];
      }
      if (year >= -3100 && year <= -2686) {
        return [
          '首都: メンフィス',
          '時代: 初期王朝時代（第1-2王朝）',
          '政体: ファラオ制',
          '君主: ナルメル王（統一者）',
          '特徴: 上下エジプト統一',
        ];
      }
      if (year >= -2686 && year <= -2181) {
        return [
          '首都: メンフィス',
          '時代: 古王国時代（第3-6王朝）',
          '政体: ファラオ制',
          '建築: ギザの大ピラミッド群',
          '君主: クフ王、カフラー王、メンカウラー王',
        ];
      }
      if (year >= -2055 && year <= -1650) {
        return [
          '首都: テーベ',
          '時代: 中王国時代（第11-12王朝）',
          '政体: ファラオ制',
          '特徴: エジプト文化の古典期',
          '拡張: ヌビア、シリアへの進出',
        ];
      }
      if (year >= -1550 && year <= -1077) {
        return [
          '首都: テーベ',
          '時代: 新王国時代（第18-20王朝）',
          '政体: ファラオ制',
          '君主: ハトシェプスト、トトメス3世、ラムセス2世',
          '特徴: エジプト最盛期、帝国の時代',
        ];
      }
      if (year >= -1000 && year <= -700) {
        return [
          '首都: タニス/テーベ',
          '時代: 第三中間期',
          '政体: ファラオ制（分裂期）',
          '状況: リビア人・ヌビア人支配',
          '特徴: 政治的混乱期',
        ];
      }
      if (year >= -700 && year <= -332) {
        return [
          '首都: サイス/メンフィス',
          '時代: 末期王朝時代',
          '政体: ファラオ制（外国支配含む）',
          '状況: アッシリア・ペルシアの支配',
          '特徴: 断続的な独立と征服',
        ];
      }
      return ['首都: メンフィス/テーベ', '政体: ファラオ制', '文明: ナイル川流域'];
    },
    events: [
      { year: -3100, event: '上下エジプト統一（ナルメル王）' },
      { year: -2560, event: 'ギザの大ピラミッド建設' },
      { year: -1274, event: 'カデシュの戦い（対ヒッタイト）' },
      { year: -30, event: 'ローマに征服される' },
    ],
  },
  Assyria: {
    name: 'アッシリア',
    facts: (year) => {
      if (year >= -2000 && year <= -1750) {
        return [
          '首都: アッシュール',
          '時代: 古アッシリア時代',
          '政体: 都市国家',
          '経済: アナトリア交易（カールム制度）',
          '特徴: 商業国家としての繁栄',
        ];
      }
      if (year >= -1750 && year <= -1500) {
        return [
          '首都: アッシュール',
          '時代: 古アッシリア時代後期',
          '政体: 王政',
          '状況: バビロン・ミタンニの圧迫',
          '特徴: 一時的衰退期',
        ];
      }
      if (year >= -1363 && year <= -1076) {
        return [
          '首都: アッシュール/ニネヴェ',
          '時代: 中アッシリア帝国',
          '政体: 帝政',
          '君主: アッシュール・ウバリト1世、ティグラト・ピレセル1世',
          '特徴: 領土拡大、軍事国家化',
        ];
      }
      if (year >= -911 && year <= -745) {
        return [
          '首都: アッシュール/カルフ',
          '時代: 新アッシリア帝国前期',
          '政体: 帝政',
          '君主: アッシュールナツィルパル2世、シャルマネセル3世',
          '特徴: 帝国再建期',
        ];
      }
      if (year >= -745 && year <= -612) {
        return [
          '首都: ニネヴェ',
          '時代: 新アッシリア帝国後期',
          '政体: 帝政',
          '君主: ティグラト・ピレセル3世、サルゴン2世、アッシュールバニパル',
          '特徴: 古代オリエント最大版図、世界初の帝国',
        ];
      }
      return ['首都: アッシュール/ニネヴェ', '政体: 王政', '地域: メソポタミア北部'];
    },
    events: [
      { year: -2000, event: '古アッシリア時代の繁栄' },
      { year: -911, event: '新アッシリア帝国成立' },
      { year: -671, event: 'エジプト征服' },
      { year: -612, event: 'ニネヴェ陥落、滅亡' },
    ],
  },
  Babylonia: {
    name: 'バビロニア',
    facts: (year) => {
      if (year >= -2000 && year <= -1894) {
        return [
          '地域: メソポタミア南部',
          '時代: イシン・ラルサ時代',
          '政体: 都市国家群',
          '特徴: シュメール・アッカド文化の継承',
          '状況: 都市国家間の抗争',
        ];
      }
      if (year >= -1894 && year <= -1595) {
        return [
          '首都: バビロン',
          '時代: 古バビロニア王国（アムル人王朝）',
          '政体: 王政',
          '君主: ハンムラビ王（前1792-1750年）',
          '法典: ハンムラビ法典（世界最古の成文法）',
        ];
      }
      if (year >= -1595 && year <= -1155) {
        return [
          '首都: バビロン',
          '時代: カッシート朝',
          '政体: 王政',
          '支配: カッシート人（山岳民族）',
          '特徴: 約400年の安定期',
        ];
      }
      if (year >= -1155 && year <= -626) {
        return [
          '首都: バビロン',
          '時代: 中期バビロニア/アッシリア支配期',
          '政体: 王政（外国支配含む）',
          '状況: アッシリア帝国の属国',
          '特徴: 政治的従属期',
        ];
      }
      if (year >= -626 && year <= -539) {
        return [
          '首都: バビロン',
          '時代: 新バビロニア帝国（カルデア帝国）',
          '政体: 帝政',
          '君主: ナボポラッサル、ネブカドネザル2世',
          '建築: バビロンの空中庭園、イシュタル門',
        ];
      }
      return ['首都: バビロン', '政体: 王政', '地域: メソポタミア南部'];
    },
    events: [
      { year: -1792, event: 'ハンムラビ即位' },
      { year: -1595, event: 'ヒッタイトによるバビロン略奪' },
      { year: -586, event: 'エルサレム陥落（バビロン捕囚）' },
      { year: -539, event: 'ペルシアに征服される' },
    ],
  },
  'Greek city-states': {
    name: 'ギリシャ都市国家群',
    facts: (year) => {
      if (year >= -2000 && year <= -1100) {
        return [
          '文明: ミノア文明/ミケーネ文明',
          '時代: 青銅器時代',
          '中心地: クノッソス、ミケーネ、ティリンス',
          '特徴: 宮殿文明、線文字B',
          '崩壊: 前1100年頃「海の民」侵入',
        ];
      }
      if (year >= -1100 && year <= -800) {
        return [
          '時代: 暗黒時代',
          '状況: 文明の衰退期',
          '特徴: 人口減少、文字の消失',
          '社会: 部族社会への回帰',
        ];
      }
      if (year >= -800 && year <= -500) {
        return [
          '主要都市: アテネ、スパルタ、コリントス',
          '時代: アルカイック期',
          '政体: 都市国家（ポリス）の形成',
          '特徴: 植民活動、アルファベット採用',
          '文化: オリンピック開始（前776年）',
        ];
      }
      if (year >= -500 && year <= -431) {
        return [
          '主要都市: アテネ、スパルタ',
          '時代: 古典期前期',
          '政体: 民主制（アテネ）、寡頭制（スパルタ）',
          '出来事: ペルシア戦争（前490-479年）',
          '文化: ペリクレス時代、パルテノン神殿',
        ];
      }
      if (year >= -431 && year <= -338) {
        return [
          '主要都市: アテネ、スパルタ、テーベ',
          '時代: 古典期後期',
          '出来事: ペロポネソス戦争（前431-404年）',
          '哲学: ソクラテス、プラトン、アリストテレス',
          '状況: 都市国家間の抗争',
        ];
      }
      return ['主要都市: アテネ、スパルタ', '政体: 都市国家（ポリス）'];
    },
    events: [
      { year: -776, event: '第1回オリンピック競技会' },
      { year: -490, event: 'マラトンの戦い（ペルシア戦争）' },
      { year: -480, event: 'サラミスの海戦' },
      { year: -338, event: 'カイロネイアの戦い、マケドニアに敗北' },
    ],
  },
  'Kingdom of David and Solomon': {
    name: '統一イスラエル王国',
    facts: [
      '首都: エルサレム',
      '君主: ダビデ王、ソロモン王',
      '政体: 王政',
      '宗教: ユダヤ教',
      '建築: エルサレム神殿（ソロモン時代）',
    ],
    events: [
      { year: -1000, event: 'ダビデ王がエルサレムを首都に' },
      { year: -970, event: 'ソロモン王即位' },
      { year: -930, event: '王国分裂（イスラエル・ユダ）' },
    ],
  },
  'Ptolemaic Kingdom': {
    name: 'プトレマイオス朝エジプト',
    facts: (year) => {
      if (year >= -305 && year <= -285) {
        return [
          '首都: アレクサンドリア',
          '君主: プトレマイオス1世（ソテル）',
          '政体: 王政（ギリシャ系王朝）',
          '特徴: 王朝創設期',
          '事業: アレクサンドリア図書館設立',
        ];
      }
      if (year >= -285 && year <= -246) {
        return [
          '首都: アレクサンドリア',
          '君主: プトレマイオス2世（フィラデルフォス）',
          '政体: 王政（ギリシャ系王朝）',
          '特徴: 王朝最盛期、学問の庇護',
          '事業: ファロスの灯台完成、七十人訳聖書',
        ];
      }
      if (year >= -51 && year <= -30) {
        return [
          '首都: アレクサンドリア',
          '君主: クレオパトラ7世',
          '政体: 王政（ギリシャ系王朝）',
          '特徴: 最後のファラオ',
          '同盟: ローマ（カエサル、アントニウス）',
        ];
      }
      return [
        '首都: アレクサンドリア',
        '政体: 王政（ギリシャ系王朝）',
        '文化: ヘレニズム文化の中心',
        '学術: アレクサンドリア図書館、ムーセイオン',
      ];
    },
    events: [
      { year: -305, event: 'プトレマイオス1世が王を称する' },
      { year: -280, event: 'ファロスの灯台完成' },
      { year: -48, event: 'カエサルがエジプトに到来' },
      { year: -30, event: 'クレオパトラ死去、ローマに併合' },
    ],
  },
  'Seleucid Kingdom': {
    name: 'セレウコス朝',
    facts: (year) => {
      if (year >= -312 && year <= -281) {
        return [
          '首都: セレウキア',
          '君主: セレウコス1世（ニカトール）',
          '政体: 王政（ギリシャ系王朝）',
          '特徴: 王朝創設期、最大版図',
          '領土: シリアからインドまで',
        ];
      }
      if (year >= -281 && year <= -190) {
        return [
          '首都: アンティオキア',
          '政体: 王政（ギリシャ系王朝）',
          '特徴: ヘレニズム文化の拡散',
          '状況: パルティアの独立、領土縮小',
        ];
      }
      if (year >= -190 && year <= -63) {
        return [
          '首都: アンティオキア',
          '政体: 王政（ギリシャ系王朝）',
          '状況: ローマへの従属、衰退期',
          '領土: シリア周辺のみ',
        ];
      }
      return [
        '首都: セレウキア/アンティオキア',
        '政体: 王政（ギリシャ系王朝）',
        '領土: シリア、メソポタミア',
        '特徴: アレクサンドロス帝国最大の後継国家',
      ];
    },
    events: [
      { year: -312, event: 'セレウコス1世が建国' },
      { year: -190, event: 'マグネシアの戦いでローマに敗北' },
      { year: -63, event: 'ポンペイウスにより滅ぼされる' },
    ],
  },
  'Roman Republic': {
    name: 'ローマ共和国',
    facts: (year) => {
      if (year >= -264 && year <= -146) {
        return [
          '首都: ローマ',
          '政体: 共和制',
          '指導: 元老院、執政官',
          '時代: ポエニ戦争期',
          '敵国: カルタゴ',
        ];
      }
      if (year >= -133 && year <= -27) {
        return [
          '首都: ローマ',
          '政体: 共和制（内乱期）',
          '状況: グラックス兄弟改革、内乱の1世紀',
          '人物: マリウス、スッラ、カエサル',
        ];
      }
      return ['首都: ローマ', '政体: 共和制', '指導: 元老院'];
    },
    events: [
      { year: -509, event: '王政廃止、共和制開始' },
      { year: -264, event: '第一次ポエニ戦争開始' },
      { year: -27, event: '帝政へ移行（アウグストゥス）' },
    ],
  },
  'Carthaginian Empire': {
    name: 'カルタゴ',
    facts: (year) => {
      if (year >= -264 && year <= -146) {
        return [
          '首都: カルタゴ',
          '政体: 共和制（寡頭制）',
          '経済: 地中海貿易の覇者',
          '将軍: ハンニバル・バルカ',
          '敵国: ローマ（ポエニ戦争）',
        ];
      }
      return ['首都: カルタゴ', '政体: 共和制', '経済: 地中海貿易'];
    },
    events: [
      { year: -814, event: 'フェニキア人が建設（伝承）' },
      { year: -218, event: 'ハンニバルのアルプス越え' },
      { year: -146, event: 'ローマにより滅亡' },
    ],
  },
  'Kushan Empire': {
    name: 'クシャーナ朝',
    capital: 'プルシャプラ',
    type: '帝政',
    events: [
      { year: 60, event: '建国' },
      { year: 127, event: 'カニシカ王即位、最盛期へ' },
    ],
  },
  'Hunnic Empire': {
    name: 'フン帝国',
    capital: '移動',
    type: '部族連合',
    events: [
      { year: 434, event: 'アッティラが王に' },
      { year: 451, event: 'カタラウヌムの戦い' },
      { year: 453, event: 'アッティラ死去、帝国崩壊' },
    ],
  },

  // Southeast Asian
  'Khmer Empire': {
    name: 'クメール帝国',
    facts: (year) => {
      if (year >= 1113 && year <= 1150) {
        return [
          '首都: アンコール',
          '君主: スーリヤヴァルマン2世',
          '政体: 神王制',
          '建築: アンコールワット建設',
          '宗教: ヒンドゥー教（ヴィシュヌ神）',
        ];
      }
      if (year >= 1181 && year <= 1218) {
        return [
          '首都: アンコール',
          '君主: ジャヤーヴァルマン7世',
          '政体: 神王制',
          '建築: アンコール・トム、バイヨン寺院',
          '宗教: 大乗仏教',
        ];
      }
      return ['首都: アンコール', '政体: 神王制', '文化: インド文化の影響'];
    },
    events: [
      { year: 802, event: 'ジャヤーヴァルマン2世が建国' },
      { year: 1113, event: 'アンコールワット建設開始' },
      { year: 1431, event: 'アユタヤに攻略される' },
    ],
  },
  'Srivijaya Empire': {
    name: 'シュリーヴィジャヤ王国',
    capital: 'パレンバン',
    type: '王政',
    events: [
      { year: 650, event: '王国成立' },
      { year: 1025, event: 'チョーラ朝に攻撃される' },
    ],
  },

  // Pacific
  "Tu'i Tonga Empire": {
    name: 'トンガ帝国',
    capital: 'トンガタプ',
    type: '王政',
    events: [{ year: 950, event: '海上帝国として繁栄' }],
  },
  'Tuʻi Tonga Empire': {
    name: 'トンガ帝国',
    capital: 'トンガタプ',
    type: '王政',
    events: [{ year: 950, event: '海上帝国として繁栄' }],
  },

  // South American
  'Huari Empire': {
    name: 'ワリ帝国',
    capital: 'ワリ',
    type: '帝政',
    events: [
      { year: 500, event: '帝国成立' },
      { year: 1000, event: '崩壊' },
    ],
  },
  'Tiahuanaco Empire': {
    name: 'ティワナク帝国',
    capital: 'ティワナク',
    type: '帝政',
    events: [
      { year: 300, event: '帝国成立' },
      { year: 1000, event: '崩壊' },
    ],
  },
  'Chim Empire': {
    name: 'チムー王国',
    capital: 'チャンチャン',
    type: '王政',
    events: [
      { year: 900, event: '王国成立' },
      { year: 1470, event: 'インカに征服される' },
    ],
  },

  // Modern nations
  'Soviet Union': {
    name: 'ソビエト連邦',
    capital: 'モスクワ',
    type: '社会主義共和制',
    events: [
      { year: 1922, event: 'ソ連成立' },
      { year: 1945, event: '第二次世界大戦勝利' },
      { year: 1991, event: '解体' },
    ],
  },
  'British Empire': {
    name: '大英帝国',
    capital: 'ロンドン',
    type: '立憲君主制',
    events: [
      { year: 1815, event: 'ワーテルローの戦い勝利' },
      { year: 1947, event: 'インド独立' },
    ],
  },
  'United Kingdom': {
    name: 'イギリス',
    capital: 'ロンドン',
    type: '立憲君主制',
    events: [
      { year: 1707, event: 'グレートブリテン連合王国成立' },
      { year: 1922, event: 'アイルランド自由国独立' },
    ],
  },
  'Nazi Germany': {
    name: 'ナチス・ドイツ',
    capital: 'ベルリン',
    type: '全体主義',
    events: [
      { year: 1933, event: 'ヒトラーが首相就任' },
      { year: 1939, event: '第二次世界大戦開戦' },
      { year: 1945, event: '敗北、政権崩壊' },
    ],
  },
  Italy: {
    name: 'イタリア',
    capital: 'ローマ',
    type: '共和制',
    events: [
      { year: 1861, event: 'イタリア王国成立' },
      { year: 1946, event: '共和制移行' },
    ],
  },
  'Italian Empire': {
    name: 'イタリア王国',
    capital: 'ローマ',
    type: '王政',
    events: [
      { year: 1861, event: 'イタリア統一' },
      { year: 1936, event: 'エチオピア併合' },
    ],
  },
};

// Priority scoring for nation selection
function scorePriority(name) {
  let score = 0;

  // High priority keywords
  if (name.includes('Empire')) score += 10;
  if (name.includes('Kingdom')) score += 5;
  if (name.includes('Republic')) score += 4;
  if (name.includes('Caliphate')) score += 8;
  if (name.includes('Shogunate')) score += 7;

  // Very high priority: exact major powers (these should always appear)
  const veryHighPriority = [
    // Modern
    'France',
    'Spain',
    'England',
    'Portugal',
    'Sweden',
    'Prussia',
    'Korea',
    'Japan',
    'Ethiopia',
    'Dutch Republic',
    'Imperial Japan',
    'Empire of Japan',
    'Tokugawa Shogunate',
    'Shogun Japan',
    'Russia',
    'United States',
    'Soviet Union',
    'China',
    'India',
    // Ancient - Very Early
    'Sumer',
    'Akkadian Empire',
    'Hittite Empire',
    'Hurrian Kingdoms',
    // Ancient - Classical
    'Egypt',
    'Assyria',
    'Babylonia',
    'Greek city-states',
    'Roman Republic',
    'Roman Empire',
    'Carthaginian Empire',
    'Achaemenid Empire',
    'Empire of Alexander',
    'Ptolemaic Kingdom',
    'Seleucid Kingdom',
    'Mauryan Empire',
    'Han Empire',
    'Kingdom of David and Solomon',
    'Parthian Empire',
  ];
  for (const kw of veryHighPriority) {
    // Exact match gets highest priority
    if (name === kw) {
      score += 20;
      break;
    }
    // Partial match gets lower priority
    if (name.startsWith(kw + ' ') || name.includes(kw)) {
      score += 12;
      break;
    }
  }

  // High priority specific names
  const highPriority = [
    'Roman',
    'Byzantine',
    'Ottoman',
    'Mongol',
    'Han',
    'Tang',
    'Song',
    'Ming',
    'Qing',
    'Manchu',
    'Russia',
    'Austria',
    'German',
    'United States',
    'China',
    'India',
    'Mughal',
    'Persia',
    'Persian',
    'Safavid',
    'Britain',
    'British',
    'Dutch',
    'Poland',
    'Tokugawa',
  ];

  for (const kw of highPriority) {
    if (name.includes(kw)) {
      score += 8;
      break;
    }
  }

  return score;
}

// Convert NAME to kebab-case filename
function toKebabCase(name) {
  return name
    .toLowerCase()
    .replace(/['']/g, '')
    .replace(/[^a-z0-9]+/g, '-')
    .replace(/^-+|-+$/g, '');
}

// Convert NAME to id format
function toIdFormat(name, year) {
  const idName = name.replace(/\s+/g, '_').replace(/['']/g, '');
  return `${idName}_${year}`;
}

// Get key events for a nation
function getKeyEvents(name) {
  const data = nationData[name];
  return data?.events || [];
}

// Get facts for a nation (supports both old and new format)
function getFacts(name, year) {
  const data = nationData[name];
  if (!data) return ['首都: 不明', '政体: 不明'];

  // New format: facts as array or function
  if (data.facts) {
    if (typeof data.facts === 'function') {
      return data.facts(year);
    }
    return data.facts;
  }

  // Old format: capital and type
  const capital = data.capital || '不明';
  const govType = data.type || '不明';
  return [`首都: ${capital}`, `政体: ${govType}`];
}

// Generate description JSON
function generateDescription(name, year) {
  const data = nationData[name];
  const japaneseName = data?.name || name;
  const facts = getFacts(name, year);
  const keyEvents = getKeyEvents(name);

  return {
    id: toIdFormat(name, year),
    name: japaneseName,
    year: year,
    facts: facts,
    keyEvents: keyEvents,
    aiGenerated: true,
  };
}

// Main
async function main() {
  // Load major nations data
  const majorNations = JSON.parse(fs.readFileSync('/tmp/major_nations.json', 'utf8'));

  const outputDir = 'public/data/descriptions';
  let totalFiles = 0;
  let newFiles = 0;

  for (const [yearStr, nations] of Object.entries(majorNations)) {
    const year = parseInt(yearStr, 10);

    // Score and sort nations by priority
    const scored = nations.map((n) => ({ name: n, score: scorePriority(n) }));
    scored.sort((a, b) => b.score - a.score);

    // Take top 15 nations to include more major powers
    const topNations = scored.slice(0, 15).map((s) => s.name);

    // Create year directory
    const yearDir = path.join(outputDir, yearStr);
    if (!fs.existsSync(yearDir)) {
      fs.mkdirSync(yearDir, { recursive: true });
    }

    for (const name of topNations) {
      const filename = `${toKebabCase(name)}.json`;
      const filepath = path.join(yearDir, filename);

      totalFiles++;

      // Always regenerate to update format
      const desc = generateDescription(name, year);
      fs.writeFileSync(filepath, `${JSON.stringify(desc, null, 2)}\n`);
      newFiles++;
      console.log(`Created/Updated: ${filepath}`);
    }
  }

  console.log(`\nTotal: ${totalFiles} files, New: ${newFiles} files`);
}

main().catch(console.error);
